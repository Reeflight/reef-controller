{"version":3,"file":"reef-controller.js","sources":["../src/controllers/firebase-controller.js","../src/controllers/i2c-controller.js","../src/controllers/data-controller.js","../src/controllers/reef-controller.js","../src/index.js"],"sourcesContent":["'use strict';\nimport * as firebase from \"firebase\";\nexport default class FirebaseController {\n  constructor() {\n    // Initialize Firebase\n    const config = {\n      apiKey: \"AIzaSyCxBWJTjZ822a_0bxGbTJV3F1dZoQVFo1w\",\n      authDomain: \"reeflight-fb71e.firebaseapp.com\",\n      databaseURL: \"https://reeflight-fb71e.firebaseio.com\"\n    };\n    firebase.initializeApp(config);\n    global.firebase = firebase;\n  }\n\n};\n","'use strict';\nconst i2c = require('i2c');\nexport default class {\n  constructor() {\n    let address = 0x00; // set address to 0x0F\n    try {\n      let wire = new i2c(address, {device: '/dev/i2c-1'});\n      wire.scan((err, data) => {\n\tconsole.log(data);\n\twire.setAddress(data[0]);\n      });\n      this.wire = wire;\n    } catch (e) {\n      this.wire = undefined;\n      console.warn('RPI not found on address: ' + this.address);\n    }\n  }\n  write(byte) {\n    console.log('writing byte', byte);\n    if (this.wire)\n      this.wire.writeByte(byte, err => {\n        console.log(\"error is \", err);\n      });\n  }\n}\n","'use strict';\nimport Backed from 'backed';\nimport FirebaseController from './firebase-controller.js';\nimport I2cController from './i2c-controller.js';\nconst i2c = new I2cController();\n\nexport default global.Backed(class DataController extends FirebaseController {\n\n  // static get properties() {\n  //   return {\n  //     data: {\n  //\n  //     }\n  //   }\n  // }\n\n  constructor() {\n    super();\n\n    this.firebase.database().ref('users/XpsE3FKDooeYDJwkxES9JLG8BPZ2/channel/').on('value', snapshot => {\n      const data = snapshot.val();\n      i2c.write(data);\n    });\n  }\n\n  get firebase() {\n    return global.firebase;\n  }\n});\n","'use strict';\nimport DataController from './data-controller.js'\nimport Backed from 'backed';\nexport default class extends DataController {\n  constructor() {\n    super();\n  }\n};\n","'use strict';\nimport ReefController from './controllers/reef-controller';\n\nnew ReefController();\n"],"names":["firebase.initializeApp","i2c"],"mappings":";;;;;;;AAEe,MAAM,kBAAkB,CAAC;EACtC,WAAW,GAAG;;IAEZ,MAAM,MAAM,GAAG;MACb,MAAM,EAAE,yCAAyC;MACjD,UAAU,EAAE,iCAAiC;MAC7C,WAAW,EAAE,wCAAwC;KACtD,CAAC;IACFA,sBAAsB,CAAC,MAAM,CAAC,CAAC;IAC/B,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;GAC5B;;CAEF,AAAC;;ACbF,MAAMC,KAAG,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;AAC3B,oBAAe,MAAM;EACnB,WAAW,GAAG;IACZ,IAAI,OAAO,GAAG,IAAI,CAAC;IACnB,IAAI;MACF,IAAI,IAAI,GAAG,IAAIA,KAAG,CAAC,OAAO,EAAE,CAAC,MAAM,EAAE,YAAY,CAAC,CAAC,CAAC;MACpD,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,IAAI,KAAK;CAC9B,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;CAClB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;OACnB,CAAC,CAAC;MACH,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;KAClB,CAAC,OAAO,CAAC,EAAE;MACV,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;MACtB,OAAO,CAAC,IAAI,CAAC,4BAA4B,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;KAC3D;GACF;EACD,KAAK,CAAC,IAAI,EAAE;IACV,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;IAClC,IAAI,IAAI,CAAC,IAAI;MACX,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,GAAG,IAAI;QAC/B,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;OAC/B,CAAC,CAAC;GACN;CACF,CAAA;;ACpBD,MAAM,GAAG,GAAG,IAAI,aAAa,EAAE,CAAC;;AAEhC,qBAAe,MAAM,CAAC,MAAM,CAAC,MAAM,cAAc,SAAS,kBAAkB,CAAC;;;;;;;;;;EAU3E,WAAW,GAAG;IACZ,KAAK,EAAE,CAAC;;IAER,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,6CAA6C,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,QAAQ,IAAI;MAClG,MAAM,IAAI,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC;MAC5B,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;KACjB,CAAC,CAAC;GACJ;;EAED,IAAI,QAAQ,GAAG;IACb,OAAO,MAAM,CAAC,QAAQ,CAAC;GACxB;CACF,CAAC,CAAC;;ACzBH,qBAAe,cAAc,cAAc,CAAC;EAC1C,WAAW,GAAG;IACZ,KAAK,EAAE,CAAC;GACT;CACF,CAAA,AAAC;;ACJF,IAAI,cAAc,EAAE,CAAC"}